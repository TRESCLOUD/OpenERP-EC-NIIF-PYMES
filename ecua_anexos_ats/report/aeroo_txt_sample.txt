<iva>
	<TipoIDInformante>${user.company_id.partner_id.code}</TipoIDInformante>
	<IdInformante>${user.company_id.partner_id.ref}</IdInformante>
	<razonSocial>${user.company_id.name}</razonSocial>
	<anio>${o.fiscalyear_id.name}</anio>	
	<mes>${o.period_id.name[:2]}</mes>
	<numEstabRuc>004</numEstabRuc>
	<totalVentas>151700.00</totalVentas>
	<codigoOperativo>IVA</codigoOperativo>
	<compras>
	{% for in_inv in search('account.invoice',[('period_id','=',o.period_id.id),('type','=','in_invoice'),]) %}
	<detalleCompras>
		<codSustento>no se como</codSustento>
		<tpIdProv>no le encuentro</tpIdProv>
		<idProv>${in_inv.partner_id.ref}</idProv>
		<tipoComprobante>${in_inv.document_invoice_type_id.code}</tipoComprobante>
		<fechaRegistro>${in_inv.date_invoice}</fechaRegistro>		
		<establecimiento>${in_inv.number[0:3]}</establecimiento>
		<puntoEmision>${in_inv.number[4:7]}</puntoEmision>
		<secuencial>${in_inv.number[8:]}</secuencial>
		<fechaEmision>${in_inv.date_invoice}</fechaEmision>
		<autorizacion>${in_inv.authorization}</autorizacion>
		<baseNoGraIva>0.00</baseNoGraIva>
		<baseImponible>0.00</baseImponible>
		<baseImpGrav>10000</baseImpGrav>
		<montoIce>0.00</montoIce>
		<montoIva>${in_inv.total_iva}</montoIva>
		<valorRetBienes>0.00</valorRetBienes>
		<valorRetServicios>0.00</valorRetServicios>
		<valRetServ100>1200</valRetServ100>
		<pagoExterior>



			






			<pagoLocExt>{pagoLocExt}</pagoLocExt>
			<paisEfecPago>NA</paisEfecPago>
			<aplicConvDobTrib>NA</aplicConvDobTrib>
			<pagExtSujRetNorLeg>NA</pagExtSujRetNorLeg>
		</pagoExterior>

		<formasDePago>{% for in_payment in search('account.move.line',[('invoice','=',in_inv.id),]) %}
			<formaPago>${in_payment.journal_id.type}</formaPago>{% end %}
		</formasDePago>

{% for in_retair in search('account.retention.line',[('invoice_id','=',in_inv.id),('description','=','renta'),]) %}
		<air>
			<detalleAir>
				<codRetAir>${in_retair.tax_id.code}</codRetAir>
				<baseImpAir>${in_retair.tax_base}</baseImpAir>
				<porcentajeAir>${in_retair.retention_percentage}</porcentajeAir>
				<valRetAir>${in_retair.retained_value}</valRetAir>
			</detalleAir>
		</air>{% end %}
		{% for in_ret in search('account.retention',[('invoice_id','=',in_inv.invoice_number_in),]) %}
		<estabRetencion1>${in_ret.number[0:3]}</estabRetencion1>
		<ptoEmiRetencion1>${in_ret.number[4:7]}</ptoEmiRetencion1>
		<secRetencion1>${in_ret.number[8:]}</secRetencion1>
		<autRetencion1>${in_ret.authorization_purchase.number}</autRetencion1>
		<fechaEmiRet1>${in_ret.creation_date}</fechaEmiRet1>{% end %}
	</detalleCompras>{% end %}
	</compras>
	<ventas>{% for out_inv in search('account.invoice',[('period_id','=',o.period_id.id),('type','=','out_invoice'),('state','in',('open','paid')),]) %}
	<detalleVentas>
		<tpIdCliente>04</tpIdCliente>
		<idCliente>${out_inv.partner_id.ref}</idCliente>
		<tipoComprobante>${out_inv.document_invoice_type_id.name}</tipoComprobante>
		<numeroComprobantes>${out_inv.invoice_number_out}</numeroComprobantes>
		<baseNoGraIva>0.00</baseNoGraIva>
		<baseImponible>0.00</baseImponible>
		<baseImpGrav>1000</baseImpGrav>
		<montoIva>${"{0:.2f}".format(out_inv.total_iva)}</montoIva>{% for out_ret in search('account.retention',[('invoice_id','=',out_inv.invoice_number_out),]) %}
		<valorRetIva>${"{0:.2f}".format(out_ret.total_iva) or 0.00}</valorRetIva>
		<valorRetRenta>${"{0:.2f}".format(out_ret.total_renta)}</valorRetRenta>{% end %}  
	</detalleVentas> {% end %}
	</ventas>
</iva>
